(function(c,o){typeof exports=="object"&&typeof module<"u"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(c=typeof globalThis<"u"?globalThis:c||self,o(c["oz-redux-dispatcher"]={}))})(this,function(c){"use strict";const o=(e,t)=>new Proxy(e,{get(r,n){return n in r?r[n]:t}}),l=e=>e?()=>{let t=!1;return{stop(){t=!0},get isStopped(){return t}}}:()=>{let t=!1;return{next(){t=!0},get isContinued(){return t}}};function f(e){return"next"in e}function b(e){const t=(e==null?void 0:e.breakOnFirst)===!1,r=new Set;return{subscribe(n,i){const u=[n,i];return r.add(u),()=>{r.delete(u)}},clearAll(){r.clear()},async handle(n){let i;for(const[u,a]of Array.from(r)){if(!await u(n))continue;const s=l(t)();if(i=await a(n,s),f(s)){if(s.isContinued)continue;break}else if(s.isStopped)break}return i}}}const h=e=>e?()=>{let t=!1;return{stop(){t=!0},get isStopped(){return t}}}:()=>{let t=!1;return{next(){t=!0},get isContinued(){return t}}};function y(e){return"next"in e}function p(e){const t=(e==null?void 0:e.breakOnFirst)===!1,r=new Set;return{subscribe(n,i){const u=[n,i];return r.add(u),()=>{r.delete(u)}},clearAll(){r.clear()},handle(n){let i;for(const[u,a]of Array.from(r)){if(!u(n))continue;const s=h(t)();if(i=a(n,s),y(s)){if(s.isContinued)continue;break}else if(s.isStopped)break}return i}}}function d(e){return typeof e=="function"}const S=()=>!0,w=()=>{const e=new Set;let t;const r={when:n=>(t=n,r),then:n=>(e.add([t,n]),r),default:n=>(e.add([S,n]),r),execute:n=>{for(const[i,u]of Array.from(e))if(i===n||d(i)&&i(n))return d(u)?u(n):u}};return r};c.buildSwitch=w,c.createMessageHandler=b,c.createMessageHandlerSync=p,c.objectMapper=o,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});
